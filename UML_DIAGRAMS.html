<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CareerCraft AI - UML Diagrams</title>
    <style>
        body {
            font-family: 'Times New Roman', Times, serif;
            line-height: 1.6;
            color: #333;
            margin: 0;
            padding: 0;
            background-color: #f8f9fa;
        }
        .container {
            width: 80%;
            margin: 2rem auto;
            padding: 20px;
            background-color: #fff;
            border: 1px solid #ddd;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        h1, h2, h3 {
            font-family: Arial, Helvetica, sans-serif;
            color: #2c3e50;
        }
        h1 { font-size: 2.5em; text-align: center; border-bottom: 2px solid #34495e; padding-bottom: 10px; }
        h2 { font-size: 2em; border-bottom: 1px solid #ccc; padding-bottom: 5px; margin-top: 2em; }
        h3 { font-size: 1.5em; margin-top: 1.5em; }
        p { text-align: justify; }
        pre {
            background-color: #f5f5f5;
            padding: 15px;
            border-radius: 5px;
            white-space: pre-wrap;
            word-wrap: break-word;
            font-family: 'Courier New', Courier, monospace;
            border: 1px solid #eee;
        }
        .explanation {
            margin-top: 1rem;
            padding: 1rem;
            background-color: #e9ecef;
            border-left: 4px solid #007bff;
            font-size: 0.95em;
        }
        .explanation ul {
            list-style-type: none;
            padding-left: 0;
        }
        .explanation li {
            margin-bottom: 0.5rem;
        }
        .explanation code {
            font-weight: bold;
            color: #c7254e;
            background-color: #f9f2f4;
            padding: 2px 4px;
            border-radius: 4px;
        }
    </style>
</head>
<body>

<div class="container">
    <h1><strong>UML Diagrams for CareerCraft AI</strong></h1>
    
    <h2><strong>Introduction</strong></h2>
    <p>
        This document contains key Unified Modeling Language (UML) diagrams for the CareerCraft AI system. These diagrams provide a standardized way to visualize the design, structure, and behavior of the application, offering insights into its architecture and core workflows. The diagrams below are represented using PlantUML syntax.
    </p>

    <h2 id="use-case">1. Use Case Diagram</h2>
    <p>
        This diagram illustrates the main services provided to the different actors. We have removed "Team Management" to focus on the unified recruiter workflow.
    </p>
    <pre><code>
@startuml
left to right direction

actor "Job Seeker" as JobSeeker
actor "Recruiter"
actor "Admin"

rectangle "CareerCraft AI System" {
  usecase "Manage Account & Profile" as UC1
  usecase "Build & Manage Resumes" as UC2
  usecase "Analyze Resume & ATS Optimization" as UC3
  usecase "Job Matching & Cover Letter" as UC4
  
  usecase "Match & Rank Candidates" as UC5
  usecase "Manage Shortlist & View Analytics" as UC6

  usecase "Manage All Users" as UC7
  usecase "Track Subscriptions & Expiry" as UC8
  usecase "Handle Support Tickets" as UC9
  
  JobSeeker -- UC1
  JobSeeker -- UC2
  JobSeeker -- UC3
  JobSeeker -- UC4
  
  Recruiter -- UC1
  Recruiter -- UC5
  Recruiter -- UC6
  
  Admin -- UC7
  Admin -- UC8
  Admin -- UC9
  
  UC3 ..> UC2 : "<<extends>>"
  UC5 ..> UC6 : "<<extends>>"
}
@enduml
    </code></pre>
    <div class="explanation">
        <h3>Explanation of Shapes</h3>
        <ul>
            <li><code>actor</code>: Job Seeker, Recruiter, and Admin.</li>
            <li><code>usecase</code>: Represents specific functionalities like "Manage Shortlist".</li>
            <li><code>rectangle</code>: System boundary.</li>
        </ul>
    </div>

    <h2 id="sequence">2. Sequence Diagram: AI Candidate Matching & Shortlisting</h2>
    <p>
        Shows the flow of a recruiter matching resumes and persisting a top candidate to their private dashboard.
    </p>
    <pre><code>
@startuml
actor Recruiter
participant "Candidate Matcher (UI)" as UI
participant "Next.js Server Action" as Server
participant "Genkit AI Flow" as Genkit
participant "Firestore DB" as DB

Recruiter -> UI : Upload Resumes & JD
activate UI

UI -> Server : candidateMatcherAction(uris, jd)
activate Server

Server -> Genkit : candidateMatcherFlow(input)
activate Genkit
Genkit --> Server : Return Scores & Justification
deactivate Genkit

Server --> UI : Display Ranked List
deactivate Server

Recruiter -> UI : Click "Shortlist"
UI -> Server : saveCandidateAction(candidateData)
activate Server
Server -> DB : Write to /users/{uid}/shortlistedCandidates
activate DB
DB --> Server : Success
deactivate DB
Server --> UI : Toast "Shortlisted"
deactivate Server
deactivate UI
@enduml
    </code></pre>

    <h2 id="class">3. Class Diagram</h2>
    <p>
        Models the main data entities. The "Team" and "Member" classes have been removed, replaced by a direct relationship between Users and their private Shortlisted Candidates.
    </p>
    <pre><code>
@startuml
skinparam classAttributeIconSize 0

class User {
  +uid: string
  +email: string
  +plan: Plan
  +credits: number
  +planUpdatedAt: Timestamp
  +requestedPlan: Plan
  --
  +updateProfile()
  +useCredit()
}

class ResumeVersion {
  +versionName: string
  +updatedAt: Timestamp
  +resumeData: Map
}

class ShortlistedCandidate {
  +name: string
  +matchScore: number
  +jobTitle: string
  +justification: string
  +shortlistedAt: Timestamp
}

class SupportRequest {
  +userId: string
  +subject: string
  +status: string
  +lastMessageAt: Timestamp
}

User "1" *-- "0..*" ResumeVersion : owns
User "1" *-- "0..*" ShortlistedCandidate : manages
User "1" -- "0..*" SupportRequest : submits
@enduml
    </code></pre>
    
    <h2 id="component">4. Component Diagram</h2>
    <p>
        High-level organization showing the connection between the Next.js frontend, Firebase, and Genkit AI.
    </p>
    <pre><code>
@startuml
package "Client (Browser)" {
  [Frontend (Next.js)] as Frontend
}

package "Cloud Services" {
  [Genkit AI Engine] as Genkit
  [Firebase Auth/DB/Storage] as Firebase
}

[Google AI (Gemini)] as Gemini
[Razorpay API] as Razorpay

Frontend ..> Firebase : SDK Interaction
Frontend ..> Razorpay : Payment Link
Genkit ..> Gemini : LLM Calls
Genkit ..> Firebase : Admin Writes
Frontend ..> Genkit : Server Actions
@enduml
    </code></pre>
</div>

</body>
</html>